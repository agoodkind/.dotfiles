#!/usr/bin/env bash
# Auto-sync Cursor rules to cloud after committing changes

set -e

# Check if lib/cursor/rules was modified in this commit
if git diff --name-only HEAD~1 HEAD | grep -q '^lib/cursor/rules/'; then
    echo "üì§ Cursor rules modified, syncing to cloud..."
    
    # Run sync script
    if [[ -x "${HOME}/.dotfiles/bin/sync-cursor-rules" ]]; then
        "${HOME}/.dotfiles/bin/sync-cursor-rules"
    else
        echo "‚ö†Ô∏è  sync-cursor-rules not found or not executable"
        exit 1
    fi
fi
