#!/usr/bin/env bash

if command -v fastfetch &> /dev/null; then
    # Create temporary config file for fastfetch
    # Using /tmp instead of stdin for better compatibility
    FASTFETCH_CONFIG=$(mktemp /tmp/fastfetch-config-XXXXXX.json)
    
    cat > "$FASTFETCH_CONFIG" <<'EOF'
{
  "$schema": "https://github.com/fastfetch-cli/fastfetch/raw/dev/doc/json_schema.json",
  "logo": {
    "type": "auto"
  },
  "display": {
    "separator": ": "
  },
  "modules": [
    "title",
    "separator",
    "os",
    "host",
    "kernel",
    "uptime",
    "packages",
    "terminal",
    "cpu",
    "gpu",
    "memory",
    "swap",
    "disk",
    "users",
    "battery"
  ]
}
EOF
    
    fastfetch --config "$FASTFETCH_CONFIG" 2>/dev/null || true
    rm -f "$FASTFETCH_CONFIG"
fi